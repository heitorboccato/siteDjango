{% extends "calculadora/base.html" %}
{% block title %}FAQ{% endblock %}

{% block content %}
<h1>Central de Ajuda â€¢ FAQ</h1>
<p style="margin-bottom: 30px;">
  Escolha uma Ã¡rea abaixo para visualizar perguntas frequentes relacionadas.
</p>

<div class="faq-categorias">
<div style="position: relative; margin-bottom: 20px;">
  <input type="text" id="faq-search" placeholder="Buscar nas perguntas..." style="width: 100%; padding: 10px 5px 10px 10px; border-radius: 10px; border: 1px solid #ccc;">
  <button id="clear-search" style="position: absolute; right: 1px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 18px; color: #888;" title="Limpar">
    <i class="fa-solid fa-xmark"></i>
  </button>
</div>
  <!-- CAMADA 1 â€“ Categorias -->
  <button class="categoria-btn">ğŸ“Š Dashboard Operacional</button>
  <div class="categoria-content">

    <!-- CAMADA 2 â€“ TÃ³picos dentro do Dashboard -->
    <button class="faq-toggle">ğŸ“Š VisÃ£o Geral</button>
  <div class="faq-content">
    <details><summary>1. O que Ã© o Dashboard Operacional do Amei?</summary>
      <p>Ã‰ uma ferramenta visual desenvolvida no Power BI para monitorar os principais indicadores operacionais das unidades AmorSaÃºde. Ele permite anÃ¡lises por perÃ­odo, unidade, canal, convÃªnio, profissional e especialidade.</p>
    </details>
    <details><summary>2. Quais sÃ£o os principais indicadores disponÃ­veis?</summary>
      <ul>
        <li>Agendamentos: volume total de agendamentos realizados.</li>
        <li>Atendimentos: nÃºmero de pacientes efetivamente atendidos.</li>
        <li>ConversÃ£o: percentual de agendamentos que viraram atendimentos.</li>
        <li>Faturamento Bruto: total financeiro gerado, independente da forma de pagamento.</li>
        <li>Ticket MÃ©dio: mÃ©dia de faturamento por atendimento ou por paciente.</li>
      </ul>
    </details>
  </div>

  <button class="faq-toggle">ğŸ“ˆ Abas do Dashboard</button>
<div class="faq-content">
  <details><summary>3. Como interpretar a aba â€œResumoâ€?</summary>
    <p>Essa aba traz uma visÃ£o consolidada de performance, com histÃ³rico de 12 meses, funil de conversÃ£o, e um painel com comparativo entre metas e realizaÃ§Ãµes. Ã‰ ideal para decisÃµes rÃ¡pidas e para ter uma visÃ£o macro da unidade.</p>
  </details>

  <details><summary>4. O que Ã© o Funil de ConversÃ£o?</summary>
    <p>Ã‰ a representaÃ§Ã£o visual da jornada do paciente dentro da clÃ­nica: <strong>Agendamentos â†’ Atendimentos â†’ PrescriÃ§Ãµes â†’ Pedidos de Exames</strong>. Ele serve para identificar em quais etapas a clÃ­nica pode estar perdendo eficiÃªncia.</p>
  </details>

  <details><summary>5. Como uso a aba â€œConsultasâ€?</summary>
    <p>Essa aba foca na jornada da consulta. Apresenta dados como o nÃºmero de QCA (clientes ativos), percentual de atingimento de metas e taxa de conversÃ£o por colaborador e profissional.</p>
  </details>

  <details><summary>6. Qual o objetivo da aba â€œPrescriÃ§Ã£o de Medicamentosâ€?</summary>
    <p>Avaliar a quantidade de receitas emitidas, o percentual de atendimentos com prescriÃ§Ã£o e a performance de prescriÃ§Ã£o por especialidade e profissional.</p>
  </details>

  <details><summary>7. O que encontro na aba â€œTempo de Esperaâ€?</summary>
    <p>Mostra o tempo mÃ©dio entre o agendamento e o atendimento, com possibilidade de filtro por profissional, canal, convÃªnio e especialidade.</p>
  </details>

  <details><summary>8. Como usar a aba â€œExames e Procedimentosâ€?</summary>
    <p>Permite monitorar o ciclo de orÃ§amentos: itens orÃ§ados vs. vendidos, valor potencial vs. realizado, taxa de conversÃ£o por colaborador e ticket mÃ©dio dos exames/procedimentos.</p>
  </details>

  <details><summary>9. E a aba â€œFinanceiroâ€?</summary>
    <p>Oferece uma visÃ£o completa da saÃºde financeira da unidade, com dados sobre receita (por competÃªncia e por caixa), custos, lucro ou prejuÃ­zo e detalhamento por serviÃ§o e forma de pagamento.</p>
  </details>

  <details><summary>10. Como interpretar o 'Regime de Caixa' e 'Regime de CompetÃªncia'?</summary>
    <ul>
      <li><strong>CompetÃªncia:</strong> considera a data em que a venda ocorreu, independentemente do pagamento.</li>
      <li><strong>Caixa:</strong> considera a data em que o valor foi efetivamente recebido.</li>
    </ul>
  </details>
</div>

  <button class="faq-toggle">â“ DÃºvidas Frequentes</button>
  <div class="faq-content">
    <details><summary>11. Onde vejo o acompanhamento das metas?</summary>
      <p>Na aba Metas OrÃ§amentÃ¡rias: mÃ©dia diÃ¡ria realizada, meta diÃ¡ria necessÃ¡ria e progresso percentual no mÃªs.</p>
    </details>
    <details><summary>12. Como aplicar filtros corretamente?</summary>
      <p>Os filtros estÃ£o sempre no topo ou no canto esquerdo. Antes de analisar os dados, confira se estÃ£o corretos: perÃ­odo, unidade, convÃªnio, canal, regional.</p>
    </details>
    <details><summary>13. Como posso tirar dÃºvidas ou solicitar suporte?</summary>
      <p>Fale com a Ã¡rea de InteligÃªncia de NegÃ³cios via ZEEV. Estamos prontos para ajudar na interpretaÃ§Ã£o dos dados e apoiar decisÃµes.</p>
    </details>
    <details><summary>14. O que Ã© o 'DicionÃ¡rio de MÃ©tricas'?</summary>
      <p>Ã‰ um glossÃ¡rio disponÃ­vel no dashboard (canto inferior esquerdo) com definiÃ§Ãµes de indicadores, fÃ³rmulas, periodicidade e fonte dos dados.</p>
    </details>
    <details><summary>15. Posso estragar algo usando o dashboard?</summary>
      <p>NÃ£o. Nenhuma aÃ§Ã£o altera os dados. Explore Ã  vontade.</p>
    </details>
  </div>
  </div>

  <!-- OUTRA CATEGORIA -->
  <button class="categoria-btn">ğŸ§® Calculadoras e Simuladores</button>
  <div class="categoria-content">
    <button class="faq-toggle">Geral</button>
    <div class="faq-content">
      <details><summary>1. Para que servem os simuladores?</summary>
        <p>Permitem prever resultados com base em parÃ¢metros reais...</p>
      </details>
      <!-- ... -->
    </div>
  </div>

  <!-- OUTRA CATEGORIA -->
  <button class="categoria-btn">ğŸ‘¥ GestÃ£o de UsuÃ¡rios</button>
  <div class="categoria-content">
    <!-- TÃ³pico: IntroduÃ§Ã£o ao Power BI -->
  <button class="faq-toggle">ğŸ“Œ IntroduÃ§Ã£o ao Power BI</button>
  <div class="faq-content">
    <details><summary>1. O que Ã© o Power BI?</summary>
      <p>Ã‰ uma ferramenta da Microsoft para visualizaÃ§Ã£o de dados. Permite transformar dados brutos em dashboards interativos e relatÃ³rios fÃ¡ceis de interpretar.</p>
    </details>
    <details><summary>2. Preciso instalar algo para acessar os dashboards?</summary>
      <p>NÃ£o. Os dashboards estÃ£o disponÃ­veis online pelo navegador. VocÃª sÃ³ precisa de um login autorizado.</p>
    </details>
  </div>

  <!-- TÃ³pico: NavegaÃ§Ã£o e Filtros -->
  <button class="faq-toggle">ğŸ§­ NavegaÃ§Ã£o e Filtros</button>
  <div class="faq-content">
    <details><summary>3. O que sÃ£o os filtros no Power BI?</summary>
      <p>SÃ£o opÃ§Ãµes que permitem selecionar apenas um recorte especÃ­fico dos dados (ex.: perÃ­odo, unidade, canal, convÃªnio). Eles estÃ£o geralmente no topo ou nas laterais do dashboard.</p>
    </details>
    <details><summary>4. Meus dados nÃ£o aparecem corretamente, o que pode ser?</summary>
      <p>Verifique se os filtros estÃ£o corretos. Filtros incorretos (como datas muito restritas ou combinaÃ§Ã£o de filtros incompatÃ­veis) podem ocultar dados importantes.</p>
    </details>
    <details><summary>5. Como saber se os dados estÃ£o atualizados?</summary>
      <p>No canto inferior esquerdo de cada dashboard hÃ¡ uma data de atualizaÃ§Ã£o. Se estiver desatualizado, acione o time de InteligÃªncia de NegÃ³cio.</p>
    </details>
  </div>

  <!-- TÃ³pico: InterpretaÃ§Ã£o de Dashboards -->
  <button class="faq-toggle">ğŸ“Š InterpretaÃ§Ã£o de Dashboards</button>
  <div class="faq-content">
    <details><summary>6. O que significa â€œsem dadosâ€ ou visual em branco?</summary>
      <p>Significa que nÃ£o hÃ¡ registros para os filtros aplicados. Tente remover ou ampliar os filtros para validar.</p>
    </details>
    <details><summary>7. Como interpretar grÃ¡ficos de linha, barra, funil ou mapa?</summary>
      <p>Passe o mouse sobre os elementos para ver os nÃºmeros exatos. Cada visual representa uma mÃ©trica sob diferentes perspectivas (tempo, unidade, categoria, etc.).</p>
    </details>
  </div>

  <!-- TÃ³pico: ExportaÃ§Ã£o e Ajustes -->
  <button class="faq-toggle">âš™ï¸ ExportaÃ§Ã£o e Ajustes</button>
  <div class="faq-content">
    <details><summary>8. Posso exportar os dados ou grÃ¡ficos?</summary>
      <p>Sim. Clique nos trÃªs pontinhos no canto superior direito de cada visual e selecione a opÃ§Ã£o 'Exportar dados'. A exportaÃ§Ã£o serÃ¡ feita em Excel (.xlsx) ou CSV, dependendo da configuraÃ§Ã£o.</p>
    </details>
    <details><summary>9. Como solicitar ajustes em dashboards?</summary>
      <p>Todas as solicitaÃ§Ãµes devem ser feitas via ZEEV, descrevendo o problema, a aba afetada e o tipo de ajuste desejado. Quanto mais claro, mais rÃ¡pido serÃ¡ atendido.</p>
    </details>
  </div>

  <!-- TÃ³pico: Erros e Acessos -->
  <button class="faq-toggle">ğŸš« Erros e Acessos</button>
  <div class="faq-content">
    <details><summary>10. Tenho acesso negado ou vejo uma mensagem de erro. O que fazer?</summary>
      <p>Verifique se estÃ¡ logado com o e-mail corporativo autorizado. Caso o problema persista, abra um chamado no ZEEV com print e descriÃ§Ã£o do erro.</p>
    </details>
  </div>

  <!-- TÃ³pico: SeguranÃ§a -->
  <button class="faq-toggle">ğŸ” SeguranÃ§a</button>
  <div class="faq-content">
    <details><summary>11. O Power BI Ã© seguro?</summary>
      <p>Sim. A plataforma segue protocolos de seguranÃ§a da Microsoft, e o acesso Ã© controlado por login corporativo e permissÃµes especÃ­ficas.</p>
    </details>
  </div>

  </div>
</div>

<!-- ESTILO -->
<style>
  .faq-categorias {
    max-width: 850px;
    margin: 0 auto;
  }

  .categoria-btn {
    width: 100%;
    background-color: #0e2d47;
    color: white;
    padding: 16px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    margin: 15px 0 5px;
    cursor: pointer;
    transition: background 0.3s;
  }

  .categoria-btn:hover {
    background-color: #1b5584;
  }

  .categoria-content {
    display: none;
    padding-left: 10px;
    border-left: 4px solid #5fd0d8;
    margin-bottom: 20px;
  }

  .faq-toggle {
    width: 100%;
    background-color: #2678bb;
    color: white;
    padding: 12px;
    border: none;
    border-radius: 8px;
    margin-top: 10px;
    text-align: left;
    font-size: 16px;
    cursor: pointer;
  }

  .faq-content {
    display: none;
    padding: 10px 20px;
    background: #f9f9f9;
    border-radius: 0 0 8px 8px;
  }

  .faq-content details {
    margin-bottom: 15px;
  }

  summary {
    font-weight: bold;
    cursor: pointer;
  }
</style>

<!-- SCRIPTS -->
<script>
  // Camada 1 â€“ Categoria
  document.querySelectorAll('.categoria-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const content = btn.nextElementSibling;
      content.style.display = content.style.display === 'block' ? 'none' : 'block';
    });
  });

  // Camada 2 â€“ TÃ³picos
  document.querySelectorAll('.faq-toggle').forEach(btn => {
    btn.addEventListener('click', () => {
      const content = btn.nextElementSibling;
      content.style.display = content.style.display === 'block' ? 'none' : 'block';
    });
  });
  // Script Busca
const searchInput = document.getElementById('faq-search');

searchInput.addEventListener('input', function () {
    const term = this.value.trim().toLowerCase();

    const categoriaContents = document.querySelectorAll('.categoria-content');
    const categoriaBtns = document.querySelectorAll('.categoria-btn');
    const toggleBtns = document.querySelectorAll('.faq-toggle');
    const faqContents = document.querySelectorAll('.faq-content');
    const details = document.querySelectorAll('.faq-content details');

    // Zerar tudo
    categoriaBtns.forEach(btn => btn.style.display = 'none');
    categoriaContents.forEach(c => c.style.display = 'none');
    toggleBtns.forEach(btn => btn.style.display = 'none');
    faqContents.forEach(faq => faq.style.display = 'none');
    details.forEach(detail => {
        detail.style.display = 'none';
        detail.open = false;
    });

    // Se busca estiver vazia: restaurar visualizaÃ§Ã£o padrÃ£o
    if (term === '') {
        categoriaBtns.forEach(btn => btn.style.display = '');
        categoriaContents.forEach(c => c.style.display = 'none');
        toggleBtns.forEach(btn => btn.style.display = '');
        faqContents.forEach(faq => faq.style.display = 'none');
        details.forEach(detail => {
            detail.style.display = '';
            detail.open = false;
        });
        return;
    }

    // Aplicar busca
    details.forEach(detail => {
        const text = detail.innerText.toLowerCase();
        if (text.includes(term)) {
            detail.style.display = '';
            detail.open = true;

            const faqContent = detail.closest('.faq-content');
            const categoriaContent = detail.closest('.categoria-content');

            if (faqContent) faqContent.style.display = 'block';
            if (categoriaContent) categoriaContent.style.display = 'block';
        }
    });
});

const searchInput2 = document.getElementById('faq-search');
  const clearBtn = document.getElementById('clear-search');

  function resetFAQ() {
    const categoriaBtns = document.querySelectorAll('.categoria-btn');
    const categoriaContents = document.querySelectorAll('.categoria-content');
    const toggleBtns = document.querySelectorAll('.faq-toggle');
    const faqContents = document.querySelectorAll('.faq-content');
    const details = document.querySelectorAll('.faq-content details');

    categoriaBtns.forEach(btn => btn.style.display = '');
    toggleBtns.forEach(btn => btn.style.display = '');
    categoriaContents.forEach(c => c.style.display = 'none');
    faqContents.forEach(faq => faq.style.display = 'none');
    details.forEach(detail => {
      detail.style.display = '';
      detail.open = false;
    });
  }

  searchInput2.addEventListener('input', function () {
    const term = this.value.trim().toLowerCase();

    const categoriaBtns = document.querySelectorAll('.categoria-btn');
    const categoriaContents = document.querySelectorAll('.categoria-content');
    const toggleBtns = document.querySelectorAll('.faq-toggle');
    const faqContents = document.querySelectorAll('.faq-content');
    const details = document.querySelectorAll('.faq-content details');

    if (term === '') {
      resetFAQ();
      return;
    }

    categoriaBtns.forEach(btn => btn.style.display = 'none');
    categoriaContents.forEach(c => c.style.display = 'none');
    toggleBtns.forEach(btn => btn.style.display = 'none');
    faqContents.forEach(faq => faq.style.display = 'none');
    details.forEach(detail => {
      detail.style.display = 'none';
      detail.open = false;
    });

    details.forEach(detail => {
      const text = detail.innerText.toLowerCase();
      if (text.includes(term)) {
        detail.style.display = '';
        detail.open = true;

        const faqContent = detail.closest('.faq-content');
        const categoriaContent = detail.closest('.categoria-content');

        if (faqContent) faqContent.style.display = 'block';
        if (categoriaContent) categoriaContent.style.display = 'block';
      }
    });
  });

  clearBtn.addEventListener('click', function () {
    searchInput2.value = '';
    resetFAQ();
  });
</script>
{% endblock %}
